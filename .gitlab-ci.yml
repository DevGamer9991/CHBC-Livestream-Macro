stages:
    - build
    - publish

build:
    stage: build
    image: maven:3.8.4-openjdk-17
    artifacts:
        paths:
            - target/chbc-livestream-macro-2.0.jar
    script: "mvn deploy -s $CI_PROJECT_DIR/settings.xml"

publish:
    stage: publish
    image: joshkeegan/zip:latest
    dependencies:
        - build
    script:
        - zip chbc-livestream-macro.zip target/chbc-livestream-macro-2.0.jar